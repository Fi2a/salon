<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragment/default}">
<head>
  <th:block layout:fragment="css">
    <link rel="stylesheet" href="/css/shop/shopDetail.css">
  </th:block>
</head>
<body>
<div layout:fragment="main" id="main">
  <section class="shop-top">
    <div class="shop-main">
      <!-- 미용실 이미지 -->
      <div class="shop-img" th:style="'background-image: url(' + (shop.shopImageDtos != null ? shop.shopImageDtos.imgUrl : '/images/default.png') + ')'">이미지</div>
      <!-- 이미지 오른쪽 아이콘 버튼 영역 -->
      <div class="shop-side">
        <!-- 찜하기 -->
        <button class="shop-btn">
            <span class="icon">
              <!-- Lucide Heart 아이콘 -->
              <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="18"
                      height="18"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-heart1"
              >
                <path
                        d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5
                  5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78
                  1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                />
              </svg>
            </span>
          <div class="text"><strong>찜하기</strong><small> | <span th:text="${shop != null and shop.likeCount != null ? shop.likeCount : 0}">0</span></small></div>
        </button>

        <!-- 미용실 주소 -->
        <div class="shop-icon">
            <span class="icon">
              <!-- Lucide Map Pin 아이콘 -->
              <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="18"
                      height="18"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-map-pin"
              >
                <path d="M12 21s8-4.5 8-10a8 8 0 1 0-16 0c0 5.5 8 10 8 10z" />
                <circle cx="12" cy="11" r="3" />
              </svg>
            </span>
          <div class="text">
            주소<br />
            <small th:if="${shop != null and shop.address != null}" th:text="${shop.address}">대전 중구 대덕대로 192</small>
          </div>
        </div>

        <!-- 미용실 전화번호 -->
        <div class="shop-icon">
            <span class="icon">
              <!-- Lucide Phone 아이콘 -->
              <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="18"
                      height="18"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-phone"
              >
                <path
                        d="M22 16.92v3a2 2 0 0 1-2.18 2 19.86 19.86 0 0 1-8.63-3.07
                  19.5 19.5 0 0 1-6-6A19.86 19.86 0 0 1 2.1 4.18 2
                2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.2 1.43.6 2.82 1.17
                4.14a2 2 0 0 1-.45 2.11l-1.27 1.27a16 16 0 0 0 6 6l1.27-1.27a2
                2 0 0 1 2.11-.45c1.32.57 2.71.97 4.14 1.17a2 2 0 0 1
                1.72 2z"
                />
              </svg>
            </span>
          <div class="text">
            전화번호 <br />
            <small th:text="${shop != null and shop.tel != null ? shop.tel : '전화번호 정보 없음'}">042-518-1884</small>
          </div>
        </div>

        <!-- 공유하기 버튼 -->
        <button class="shop-btn">
            <span class="icon">
              <!-- Lucide Share 아이콘 -->
              <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="18"
                      height="18"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-share"
              >
                <path d="M4 12v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7" />
                <polyline points="16 6 12 2 8 6" />
                <line x1="12" y1="2" x2="12" y2="15" />
              </svg>
            </span>
          <div class="text"><strong>공유하기</strong></div>
        </button>
        <!-- 공유하기 모달 -->
        <div id="share-modal" style="display: none">
          <div class="modal-content">
            <p>공유할 수 있는 링크 복사하기</p>
            <input type="text" th:value="${shop != null ? 'https://localhost/shop/' + shop.id : '잘못된 링크'}" />
            <button>복사</button>
          </div>
        </div>
      </div>
    </div>
    <!-- 미용실 이름 및  평점 -->
    <div class="shop-title">
      <h2 th:text="${shop != null ? shop.name : '미용실 정보 없음'}">Salon De DW</h2>
      <div class="rating">
        <!-- 평점이 없는 경우 예외 처리 -->
        <span th:if="${shop != null and shop.rating != null}" th:text="${'★'.repeat(shop.rating.intValue()) + '☆'.repeat(5 - shop.rating.intValue()) + ' ' + shop.rating}">
          ★★★★☆ 4.0"</span>
        <span th:if="${shop != null and shop.rating == null}">평점 없음</span>

      </div>
    </div>

    <!-- 운영시간 및 주의사항 -->
    <div class="shop-info-box">
      <h3>✔ 매장 운영시간 ✔</h3>
      <p>
        <span class="red" th:text="|휴무일 : ${shop.dayOffText}|">휴무일 안내</span><br />
        ⏰ 평일운영 10:00~20:00 <br /> ⏰ 주말운영 10:00~20:00
      </p>
      <!-- 매장 소개 -->
      <div class="shop-description">
        <p><strong>✔ 매장 소개 ✔</strong></p>

        <p th:if="${shop != null and shop.description != null}"
           th:utext="${#strings.replace(shop.description, '\n', '<br/>')}">
        </p>

        <p th:unless="${shop != null and shop.description != null}">
          매장 소개 정보 없음
        </p>
      </div>
    </div>

    <!-- 메뉴바 -->
    <section class="shop-tabs-wrapper">
      <div class="container">
        <nav class="shop-tabs">
          <ul>
            <li class="tab-item active" data-tab="section-home">홈</li>
            <li class="tab-item" data-tab="section-service">시술 목록</li>
            <li class="tab-item" data-tab="section-designer">디자이너</li>
            <li class="tab-item" data-tab="section-review">리뷰</li>
          </ul>
        </nav>
      </div>
    </section>
  </section>
  <!-- 홈 섹션-->
  <section class="tab-content" id="section-home">
    <!-- 추천 시술 목록-->
    <section class="recommend-service" th:if="${recommendedService != null and !recommendedService.isEmpty()}">
      <h3>추천 시술</h3>
      <ul class="service-list">
        <li class="service-item selected" th:each="service : @{recommendedService}">
          <div class="service-thumb"
          th:style="background-image: url (' + (${service.imgUrl} != null ? ${service.imgUrl} : '/images/default.png') + ')'">
          </div>
          <div class="service-info">
            <strong th:text="${service.name}">시술 이름</strong>
            <p th:text="${#numbers.formatInteger(service.price, 3, 'COMMA')}">120,000</p>
            <span>커트 포함</span>
          </div>
        </li>
      </ul>

      <!-- 시술 더보기 버튼 -->
      <button class="btn-more">
        시술 더보기 <i class="fa-solid fa-chevron-down"></i>
      </button>
    </section>

    <!-- 추천 시술이 없을 경우 -->
    <section th:if="${recommendedService == null or recommendedService.isEmpty()}">
      <p>아직 추천 시술이 등록되지 않았습니다.</p>
    </section>


    <!-- 디자이너 목록 -->
    <section class="designer-section" th:if="${designerLists != null and !designerLists.isEmpty()}">
      <h3>디자이너</h3>
      <div class="designer-list">
        <div class="designer-card" th:each="designer : ${designerLists}">
          <!-- 디자이너 프로필 이미지 -->
          <div class="designer-photo"
               th:style="'background-image:url(' + (${designer.imgUrl} != null ? ${designer.imgUrl} : '/images/default-profile.png') + ')'"
          ></div>
          <!-- 디자이너 이름 & 직급 & 연차 -->
          <div class="designer-info">
            <p>
              <strong th:text="${designer.name}">나미리 원장디자이너</strong>
            <span class="designer-summary" th:text="${designer.profileSummary}">펌, 클리닉 전문 (11년차)</span>
            </p>
          </div>
          <!-- 디자이너 좋아요 & 리뷰 수 -->
          <div class="designer-status">
            <span>💬 <span th:text="${designer.reviewCount}">256</span> </span>
            <span>🤍 <span th:text="${designer.likeCount}"> 1,547</span></span>
          </div>

          <!-- 예약하기 버튼 -->
          <button class="btn-reserve"
                  th:onclick="'location.href=\'/reservation/designer/' + ${designer.id} + '\';'">
            예약하기
          </button>
        </div>
      </div>
    </section>

    <!-- 리뷰 목록 -->
    <section class="review-section" th:if="${reviewList != null and !reviewList.isEmpty()}">
      <h3>리뷰 <span th:text="${reviewList.size()}">0</span></h3> <article class="review-card" th:each="review : ${reviewList}">
      <h4>
        <div th:if="${review != null and review.serviceName != null}">
          <span th:text="${review.serviceName}">시술명</span>
        </div>
        <span th:if="${review.designerName != null}">by <span th:text="${review.designerName}">장두목</span> 디자이너</span>
      </h4>

      <th:block th:each="review : ${reviewList}">
        <div th:if="${review.imageDtos != null and #lists.size(review.imageDtos) > 0}" class="r-thumb" th:remove="tag">
          <img th:src="${review.imageDtos[0].imgUrl}" alt="리뷰 이미지" />
          <img src="" alt="더보기 이미지" />
          <span class="r-plus">+ 더보기</span>
        </div>
      </th:block>



      <!-- 리뷰 카드 -->


        <!-- 리뷰 이미지 최대 3개 -->
        <div class="review-images" th:if="${review.imageDtos != null}">
          <th:block th:each="review : ${reviewList}">
            <div th:if="${review.imageDtos != null}" class="r-thumb" th:remove="tag">
              <img th:src="${review.imageDtos[0].imgUrl}" alt="리뷰 이미지" />
              <img src="" alt="더보기 이미지" />
              <span class="r-plus">+ 더보기</span>
            </div>
          </th:block>
        </div>

        <!-- 리뷰 내용 -->
        <p class="review-text" th:text="${review.content}">
          디자이너님이 진짜 산적 두목같이 생기셔서 의심했는데...
        </p>


      <!-- 메타 정보 -->
        <div class="review-meta">
          ★★★★★ <span th:text="${#numbers.formatDecimal(review.rating, 1, 1)}">5.0</span> ·
          <span th:text="${review.memberMaskedName}">누*지</span> ·
          <span th:text="${review.daysAgo + '일 전'}">21일 전</span> ·
          <span th:text="${review.visitCount + '번째 방문'}">4번째 방문</span>
        </div>
      </article>
               <!-- 리뷰 더보기 버튼 -->
      <div class="review-more">
        <button class="btn-more">리뷰 더보기</button>
      </div>
    </section>

    <!-- 리뷰 없음 -->
    <section class="review-section" th:if="${reviewList == null or reviewList.isEmpty()}">
      <h3>리뷰</h3>
      <p>아직 등록된 리뷰가 없습니다.</p>
    </section>

    <!-- 예약하기 버튼 -->
    <div class="fixed-reserve">
      <div class="reserve-inner">
        <a th:href="@{/reservation/write(shopId=${shop.id})}" class="reserve-btn">예약하기</a>
      </div>
    </div>
  </section>

  <!-- 시술 목록 섹션 -->
  <section class="tab-content" id="section-service" style="display: none">
    <div class="category-tabs-wrapper">
      <div class="container">
        <!-- 시술 카테고리 -->
        <div class="category-tabs">
          <button class="category-btn active" data-category="all">
            전체
          </button>
          <button class="category-btn" data-category="pick-menu">
            추천 시술
          </button>
          <button class="category-btn" data-category="cut">커트</button>
          <button class="category-btn" data-category="perm">펌</button>
          <button class="category-btn" data-category="clinic">클리닉</button>
          <button class="category-btn" data-category="upstyle">
            업스타일
          </button>
          <button class="category-btn" data-category="dry">드라이</button>
          <button class="category-btn" data-category="color">염색</button>
          <button class="category-btn" data-category="hair-extension">
            붙임머리
          </button>
        </div>
      </div>
    </div>

    <!-- 시술 리스트 -->
    <div class="container">
      <div class="category-section" id="pick-menu">
        <h3>추천 시술</h3>
        <!-- 추천시술 카테고리 리스트-->
        <ul class="service-list category-pick-menu"
            th:if="${serviceSection != null and serviceSection.recommended != null}">
          <li class="service-item no-image"
              th:each="svc : ${serviceSection.recommended}">
            <strong class="service-name" th:text="${svc.name}">시술명</strong>
            <div class="service-price"><span class="original"
            th:text="${#numbers.formatInteger(svc.price, 3, 'COMMA')} + '원'">120,000원</span>
            </div>
          </li>
        </ul>

        <div class="service-more">
          <button class="more-btn">
            <span class="label">더보기</span>
            <i class="chevron fa-solid fa-chevron-down"></i>
          </button>
        </div>
      </div>

      <!-- 커트 카테고리 리스트 -->
      <div class="category-section" id="cut">
        <h3>커트</h3>
        <ul class="service-list category-cut"
            th:if="${serviceSection != null and serviceSection.categoryMap != null and serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).CUT] != null}">
          <li class="service-item no-image"
              th:each="svc : ${serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).CUT]}">
            <strong class="service-name" th:text="${svc.name}">시술명</strong>
            <div class="service-price">
              <span class="original" th:text="${#numbers.formatInteger(svc.price, 3, 'COMMA')} + '원'">가격</span>
            </div>
            <div class="service-extra">커트 포함</div>
          </li>
        </ul>
        <div class="service-more">
          <button class="more-btn">
            <span class="label">더보기</span>
            <i class="chevron fa-solid fa-chevron-down"></i>
          </button>
        </div>
      </div>

      <!-- 펌 카테고리 리스트 -->
      <div class="category-section" id="perm">
        <h3>펌</h3>
        <ul class="service-list category-cut"
            th:if="${serviceSection != null and serviceSection.categoryMap != null and serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).PERM] != null}">
          <li class="service-item no-image"
              th:each="svc : ${serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).PERM]}">
            <strong class="service-name" th:text="${svc.name}">시술명</strong>
            <div class="service-price">
              <span class="original" th:text="${#numbers.formatInteger(svc.price, 3, 'COMMA')} + '원'">가격</span>
            </div>
            <div class="service-extra">커트 포함</div>
          </li>
        </ul>

        <div class="service-more">
          <button class="more-btn">
            <span class="label">더보기</span>
            <i class="chevron fa-solid fa-chevron-down"></i>
          </button>
        </div>
      </div>

      <!-- 클리닉 카테고리 리스트 -->
      <div class="category-section" id="clinic">
        <h3>클리닉</h3>
        <ul class="service-list category-cut"
            th:if="${serviceSection != null and serviceSection.categoryMap != null and serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).CLINIC] != null}">
          <li class="service-item no-image"
              th:each="svc : ${serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).CLINIC]}">
            <strong class="service-name" th:text="${svc.name}">시술명</strong>
            <div class="service-price">
              <span class="original" th:text="${#numbers.formatInteger(svc.price, 3, 'COMMA')} + '원'">가격</span>
            </div>
            <div class="service-extra">커트 포함</div>
          </li>
        </ul>
        <div class="service-more">
          <button class="more-btn">
            <span class="label">더보기</span>
            <i class="chevron fa-solid fa-chevron-down"></i>
          </button>
        </div>
      </div>

      <!-- 업스타일 카테고리 리스트 -->
      <div class="category-section" id="upstyle">
        <h3>업스타일</h3>
        <ul class="service-list category-cut"
            th:if="${serviceSection != null and serviceSection.categoryMap != null and serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).UPSTYLE] != null}">
          <li class="service-item no-image"
              th:each="svc : ${serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).UPSTYLE]}">
            <strong class="service-name" th:text="${svc.name}">시술명</strong>
            <div class="service-price">
              <span class="original" th:text="${#numbers.formatInteger(svc.price, 3, 'COMMA')} + '원'">가격</span>
            </div>
            <div class="service-extra">커트 포함</div>
          </li>
        </ul>
        <div class="service-more">
          <button class="more-btn">
            <span class="label">더보기</span>
            <i class="chevron fa-solid fa-chevron-down"></i>
          </button>
        </div>
      </div>

      <!-- 드라이 카테고리 리스트 -->
      <div class="category-section" id="dry">
        <h3>드라이</h3>
        <ul class="service-list category-cut"
            th:if="${serviceSection != null and serviceSection.categoryMap != null and serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).DRY] != null}">
          <li class="service-item no-image"
              th:each="svc : ${serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).DRY]}">
            <strong class="service-name" th:text="${svc.name}">시술명</strong>
            <div class="service-price">
              <span class="original" th:text="${#numbers.formatInteger(svc.price, 3, 'COMMA')} + '원'">가격</span>
            </div>
            <div class="service-extra">커트 포함</div>
          </li>
        </ul>
        <div class="service-more">
          <button class="more-btn">
            <span class="label">더보기</span>
            <i class="chevron fa-solid fa-chevron-down"></i>
          </button>
        </div>
      </div>

      <!-- 염색 카테고리 리스트 -->
      <div class="category-section" id="color">
        <h3>염색</h3>
        <ul class="service-list category-cut"
            th:if="${serviceSection != null and serviceSection.categoryMap != null and serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).COLOR] != null}">
          <li class="service-item no-image"
              th:each="svc : ${serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).COLOR]}">
            <strong class="service-name" th:text="${svc.name}">시술명</strong>
            <div class="service-price">
              <span class="original" th:text="${#numbers.formatInteger(svc.price, 3, 'COMMA')} + '원'">가격</span>
            </div>
            <div class="service-extra">커트 포함</div>
          </li>
        </ul>
        <div class="service-more">
          <button class="more-btn">
            <span class="label">더보기</span>
            <i class="chevron fa-solid fa-chevron-down"></i>
          </button>
        </div>
      </div>

      <!-- 붘임머리 카테고리 리스트  -->
      <div class="category-section" id="hair-extension">
        <h3>붙임머리</h3>
        <ul class="service-list category-cut"
            th:if="${serviceSection != null and serviceSection.categoryMap != null and serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).HAIR_EXTENSION] != null}">
          <li class="service-item no-image"
              th:each="svc : ${serviceSection.categoryMap[T(com.salon.constant.ServiceCategory).HAIR_EXTENSION]}">
            <strong class="service-name" th:text="${svc.name}">시술명</strong>
            <div class="service-price">
              <span class="original" th:text="${#numbers.formatInteger(svc.price, 3, 'COMMA')} + '원'">가격</span>
            </div>
            <div class="service-extra">커트 포함</div>
          </li>
        </ul>
        <div class="service-more">
          <button class="more-btn">
            <span class="label">더보기</span>
            <i class="chevron fa-solid fa-chevron-down"></i>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- 디자이너 목록 섹션 -->
  <section class="tab-content" id="section-designer" style="display: none">
    <div class="container">
      <ul class="designer-list-view"  th:if="${designerLists != null and !designerLists.isEmpty()}">
        <li class="designer-item" th:each="designer : ${designerList}">
          <!-- 디자이너 프로필 사진 -->
            <img th:src="${designer.imgUrl != null ? designer.imgUrl : '/images/default-profile.png'}" />
          <!-- 디자이너 정보 -->
          <div class="designer-detail">
            <p class="designer-label">
              <span th:text="${designer.name}">이름</span>

              <span th:text="${designer.position != null ? designer.position : '디자이너'}">디자이너</span>
            </p>
            <p class="de-detail">
                <div class="designer-card">
                  <p th:text="${designer != null and designer.profileSummary != null ? designer.profileSummary : '소개 정보 없음'}">전문시술 분야 + 연차</p>
                </div>
            </p>
            <div class="designer-status">
              <span class="status-item">🤍 <span th:text="${#numbers.formatInteger(designer.likeCount, 3, 'COMMA')}">0</span></span>
              <span class="status-item">💬 <span th:text="${#numbers.formatInteger(designer.reviewCount, 3, 'COMMA')}">0</span></span>
            </div>
          </div>
          <div class="designer-book">
            <button class="btn-book"
                    th:onclick="|location.href='/reservation/designer/${designer.id}'|">
              <i class="fa fa-calendar-days"></i>예약
            </button>
          </div>
        </li>
      </ul>
    </div>
  </section>
  <!-- 리뷰 섹션 -->
  <section class="tab-content" id="section-review" style="display: none">
    <div class="container">
      <!-- 카테고리 탭 -->
      <div class="r-tabs-wrapper">
        <div class="r-tabs">
          <button class="r-tab active" data-category="all">전체</button>
          <button class="r-tab" data-category="cut">커트</button>
          <button class="r-tab" data-category="perm-w">여성펌</button>
          <button class="r-tab" data-category="perm-m">남성펌</button>
          <button class="r-tab" data-category="style">스타일링</button>
          <button class="r-tab" data-category="clinic">클리닉</button>
        </div>
      </div>

      <div class="r-toolbar">
        <!-- 고객 리뷰 제목 + 정렬 필터 -->
        <div class="r-header">
          <h3 class="r-title">고객 리뷰</h3>

          <select class="r-sort">
            <option value="latest">최신순</option>
            <option value="high">별점 높은순</option>
            <option value="low">별점 낮은순</option>
          </select>
        </div>

        <!-- 리뷰 썸네일 -->
        <div class="r-thumbnails">

          <th:block th:each="review : ${reviewList}">
            <div th:if="${review.imageDtos != null}" class="r-thumb" th:remove="tag">
              <img th:src="${review.imageDtos[0].imgUrl}" alt="리뷰 이미지" />
              <img src="" alt="더보기 이미지" />
              <span class="r-plus">+ 더보기</span>
            </div>
          </th:block>
        </div>

        <!-- 리뷰 리스트 -->
        <ul class="r-list" th:if="${reviewList != null}">
          <li class="r-item"
              th:each="review : ${reviewList}"
              th:attr="data-category=${review.category.name().toLowerCase()}">
            <div class="r-item-header">
              <strong th:text="${review.serviceName}">서비스명</strong>
              <span class="chevron">&gt;</span>
            </div>
            <div class="r-rating"
                 th:text="${'★'.repeat(T(java.lang.Math).round(review.rating)) + '☆'.repeat(5 - T(java.lang.Math).round(review.rating)) + ' ' + #numbers.formatDecimal(review.rating,1,1)}">
              ★★★★☆ 4.0
            </div>
            <div class="r-content">
              <p th:text="${review.content}">리뷰 내용</p>
              <div class="r-meta"
                   th:text="${review.memberMaskedName + ' · ' + #temporals.format(review.createdAt, 'yyyy.MM.dd') + ' · ' + review.visitCount + '번째 방문'}">
                이*나 · 2025.06.28 · 3번째 방문
              </div>
            </div>
          </li>
        </ul>
        <!-- 더보기 버튼 -->
        <div class="r-more">
          <button class="r-toggle-btn">
            더보기 <span class="arrow">▼</span>
          </button>
        </div>
      </div>
    </div>
  </section>
</div>


<th:block layout:fragment="script" >
  <script th:src="@{/javascript/shop/shopDetail.js}" defer></script>
</th:block>
</body>
</html>